## 项目名： 租房个人上下架job设计
### 项目背景：
```
    租房个人源房源上下架job在hao-site代码库里，该job只能且必须启动16个进程，不便于监控和管理，且job所运行机器负载率高经常出问题。为方便管理，现将该job迁移至新框架
```
### 流程图：
![Alt text](http://gitlab.corp.anjuke.com/ruiwang_h214/design/raw/master/%E7%A7%9F%E6%88%BF%E5%88%97%E8%A1%A8%E9%A1%B52.png "Optional title")



### 参数说明：
参数|说明|是否必须|默认值
 ---|---|---|---
fork_num|进程编码|是|无
fork_count|进程总数|是|无
start|开始游标|否|首次为0；后面读游标
end|结束游标|否|默认为-1，代表一直运行
count|每次查询队列表条数|否|20
### 新job使用说明：
 *  该job每次处理的游标id为  队列表id % fork_count == fork_num，即用进程数对游标数取余，结果如与进程编号相等则处理。
 *  该job的进程数可调控，改变进程个数方法:
   * 手动停止所有job.
   * 第一次指定end游标，启动job,等待所有job停止.
   * 第二次，当所有job停后,重新给定进程数，同时给出start值，该start值为第一次指定的end值，并给出进程编码（小于进程总数的非负整数）,同时重新指定fork_count和fork_num参数。
 

### 新job测试方法：
此次为job迁移，构造参数未发生变化，故可以将原来老job运行的结果和新运行结果进行对比，以下是不同字段：
   * rank字段，rank分数有随机因子，和老job相差两三千之内，都没问题。
   * 默认图片地址，新job使用了泛解析，原图都一样
