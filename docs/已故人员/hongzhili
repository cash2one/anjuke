#项目总结
### 一 seo列表页迁移
* 开发之前的状况:

(1) 二手房和租房耦合过多 控制器代码非常臃肿。

(2) SEO租房列表页与新的租房列表页存在诸多的不兼容问题比如跳转到租房的url与当前租房的列表页不符合，租房整体没有做到touch的适配。

(3) SEO的房源列表页的房源数据量与默认列表页存在较大区别。

* 开发过程中的处理

(1) 精简代码与服务化
service化 ：获取推荐数据service  获取租房房源数据service 获取二手房房源数据service  推荐数据操作service 

(2) 根据当前异步推荐api 新建与之对应的biz  供service调用

(3)修改原来线上已存在的bug问题

*  比较痛苦的问题

1.热门搜索数据获取

2.租房的搜索链接跳转太繁琐了 ，一次302 ，2次301 还有使用有post的方式 ，提交的字段值也很奇葩

3.touch 适配跳转 租房二手房 老框架中地铁找房和公交找房并没有

4.租房和二手房的房源数据格式差异很大

5.匹配到小区的时候需要给出来看了又看，然而这个又要求直接跳到小区单页需要拿小区名去查找小区ID

6.小区的跳转存在两个 一个是小区单页 一个是 seo www的小区页面

7.内链服务简直就是噩梦 太不好用了

* 线上现状

租房 二手房 完全迁移到新框架中，但是公交找房和地铁找房代码层面也迁移到新框架由于没有测试资源只能先使用老仓库中的。
切换时记得需要修改nginx 配置和route配置


###二 	主题找房CMS系统和项目二期开发
* 开发之前的状况

用户端 线上代码没有分页功能 数据库设计存在严重问题 各表之间的关联关系混乱，存在之前存储html代码的现象

CMS  好长时间没有人维护

* 开发要求
  实现在线表 与离线表的隔离
  能够满足存草稿  删除 下线 草稿预览 上线  上线预览等诸多状态

*  比较痛苦的问题
 1.图片上传之后的预览图 --几种固定的格式可选 不支持原图模式
 2.几个表之前的curd要使用事务控制
 3.草稿预览状态涉及到修改用户端数据库表的切换需要在用户端代码修改
 比较坑的问题时存在dao缓存 往往预览不到修改的数据 需要清除缓
 4.个人觉得cms的菜单权限设置非常坑爹 开发－dev－上线 每次都要修改菜单码
 
* 线上现状
比较ok 没有出现线上bug 


###三 百度SEO着陆到城市选择页（无厘头的项目感觉真没啥好说的）

一、index页面跳转（解决转化问题）
	1. www.anjuke.com/index.html 301跳转到www.anjuke.com （目前这个页面排名品牌词第一位，跳转可以解决转化率）
	2. 重新建一个新的城市选择页面www.anjuke.com/sy-city.html （给用户选择城市） 二、www首页处理方法（解决www页面排名问题）1.  用户访问：www.anjuke.com 页面保持现在设置不变。
	3. 爬虫访问：通过user agent 判断，如果是爬虫即显示城市选择页面。  百度爬虫Baiduspider百度新版Baiduspider/2.0百度新闻Baiduspider-news百度移动http://www.baidu.com/search/spider.html百度移动http://www.baidu.com/search/spi_der.htm神马爬虫Yisouspider360爬虫360Spider好搜爬虫HaosouSpider谷歌爬虫Googlebot搜狗爬虫Sogou web spider/4.0   Sogou inst spider/4.0必应爬虫bingbot雅虎爬虫Yahoo！ Slurp有道YodaoBot     OutfoxBotMSN msnbot

*  比较痛苦的问题
各城市页面不该跳的容易误伤改成跳到首页

* 线上现状

按要求来 目前没出问题

###四  pc标签找房

* 项目要求

房源列表页中原来的筛选单选 增加多选选择条件 允许出现多条件复合选择

* 遇到的坑 

修改url 的样式修改导致所有的参数解析的修改

新的url将板块和区域分别用不同的字段来处理 重构的东西较多

原有的solr查询并不支持多条件聚合 因此修改了整个的参数rewrite 和url参数拼装的过程 ，感觉这样做确实不好，要是能够使搜索独立成服务，完善搜索的扩展型

* 现状
可通的城市 杭州和天津，能够稳定的运行 未出现明显的bug